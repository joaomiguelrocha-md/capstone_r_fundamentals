p4 <- total_ep_uls |>
ggplot() +
geom_bar(aes(x = adm_tip, y = total, fill = sexo),
stat = "identity") +
geom_text(
label = "total",
stat = "identity",
position = position_stack(vjust = 0.5)
) +
facet_wrap(~uls_2024) +  # Dividir o gráfico em facetas com base na variável 'tipo_de_especialidade'
theme_classic()
p4
View(gdh_base_raw)
gdh_unique[["dsp"]]
gdh_unique[["tipo_port APR31"]]
tabela0
gdh_base_raw |>
count(`tipo_port APR31` == "Amb")
gdh_base_raw |>
count(
`tipo_port APR31` == "Amb",
dias_int == 0
) |>
```
gdh_base_raw |>
count(
`tipo_port APR31` == "Amb",
dias_int == 0
)
gdh_base_raw |>
count(
`tipo_port APR31` == "Amb",
dias_int == 0
) |>
count(`tipo_port APR31` == "Amb")
gdh_base_raw |>
count(`tipo_port APR31` == "Amb") |>
count(
`tipo_port APR31` == "Amb",
dias_int == 0
) |>
```
gdh_base_raw |>
count(`tipo_port APR31` == "Amb") |>
count(
`tipo_port APR31` == "Amb",
dias_int == 0
)
gdh_base_raw |>
count(`tipo_port APR31` == "Amb")
gdh_base_raw |>
count(
`tipo_port APR31` == "Amb",
dias_int == 0
)
gdh_base_raw |>
count(
`tipo_port APR31` == "Int",
dias_int == 0
)
View(gdh_join_final)
total_icd_10 <- gdh_join_final |>
group_by(icd10_code) %>%
summarise(total = n()) %>%
arrange(uls_2024)
total_icd10 <- gdh_join_final |>
group_by(icd10_code) %>%
summarise(total = n())
View(total_icd10)
total_icd10 <- gdh_join_final |>
group_by(icd10_code) |>
summarise(total = n()) |>
arrange(total)
total_icd10 <- gdh_join_final |>
group_by(icd10_code) |>
summarise(total = n()) |>
arrange(desc(total))
View(icd10_codes)
View(icd10_codes_pt)
total_icd10 <- gdh_join_final |>
group_by(icd10_code) |>
summarise(total = n()) |>
arrange(desc(total)) |>
right_join(
icd10_codes_pt,
by = "icd10_code"
)
View(total_icd10)
total_icd10_uls |>
count(
tipo_port_apr31 == "Amb",
icd10_code == ""
)
total_icd10_uls |>
count(
tipo_port_apr31 == "Amb",
icd10_code == "	Z5111"
)
total_icd10 |>
count(
tipo_port_apr31 == "Amb",
icd10_code == "	Z5111"
)
View(total_icd10)
total_icd10 |>
count(
tipo_port_apr31 == "Amb",
icd10_code == "Z5111"
)
total_icd10 <- gdh_join_final |>
group_by(icd10_code) |>
summarise(total = n()) |>
arrange(desc(total)) |>
left_join(
icd10_codes_pt,
by = "icd10_code"
)
total_icd10 <- gdh_join_final |>
group_by(icd10_code) |>
summarise(total = n()) |>
arrange(desc(total)) |>
left_join(
icd10_codes_pt,
by = "icd10_code"
)
View(total_icd10)
total_icd10 <- gdh_join_final |>
group_by(icd10_code) |>
summarise(total = n()) |>
arrange(desc(total)) |>
left_join(
icd10_codes_pt,
by = "icd10_code"
)
View(total_icd10)
total_icd10 <- gdh_join_final |>
group_by(icd10_code) |>
summarise(total = n()) |>
arrange(desc(total)) |>
left_join(
icd10_codes_pt,
by = "icd10_code"
)
View(total_icd10)
total_icd10_uls <- gdh_join_final |>
group_by(icd10_code, tipo_port_apr31, uls_2024) %>%
summarise(total = n()) %>%
arrange(desc(total))
View(total_icd10_uls)
tabela0
gdh_join_final_sum <- df_summarise(gdh_join_final)
tabela500 <- gdh_join_final_sum |>
gt()
tabela500
View(geo_linkage_clean)
View(gdh_base_join)
# Contar total de observações por grupo etário
contagem_idade <- gdh_uls %>%
group_by(uls_2024, as.factor(sexo), idade_cat_ine) %>%
summarise(total = n()) %>%
arrange(idade_cat_ine)
View(gdh_uls)
View(contagem_idade)
View(tabela01)
tabela01
gdh_join_final <- gdh_base_join |>
left_join(
geo_linkage_clean,
by = "dt_mun")
View(gdh_base_join)
View(gdh_join_final)
total_icd10 <- gdh_join_final |>
group_by(uls_2024, dt_mun, icd10_code) |>
summarise(total = n()) |>
arrange(desc(total)) |>
left_join(
icd10_codes_pt,
by = "icd10_code"
)
tabela500
p10 <- ggplot(
total_ep_uls,
aes(x= idade_cat_eu)
) +
geom_density(alpha=.4) +
facet_grid(~uls_2024) +
labs(title = "Nº Episodios por grupo etário",
subtitle = "ULS Amadora/Sintra e ULS Médio Ave",
y = "Densidade",
x = "Grupo etário",
caption = "Autores:") +
theme_minimal()
p10
p11 <- ggplot() +
geom_area(
gdh_uls,
aes(y = ),
alpha= 0.4,
colour = "black",
stat = "bin") +
# facet_grid(~uls_2024) +
labs(title = "Nº Episodios por grupo etário",
subtitle = "ULS Amadora/Sintra e ULS Médio Ave",
y = "Densidade",
x = "Grupo etário",
caption = "Autores:") +
theme_minimal()
p4_0 <- gdh_uls |>
mutate(
idade_cat = cut(idade, c(0, 18, 65, Inf))
) |>
ggplot() +
geom_bar(
aes(x = uls_2024, fill = idade_cat),
position = "fill"
) +
geom_text(
aes(x = uls_2024, fill = idade_cat,
label = after_stat(count)),
stat = "count",
position = position_fill(vjust = 0.5)
) +
theme_classic()
p4_0
p4_2 <- gdh_uls |>
mutate(
idade_cat = cut(idade, c(0, 18, 65, Inf))
) |>
ggplot() +
geom_bar(
aes(x = uls_2024, fill = idade_cat),
position = "fill"
) +
geom_text(
stat = "count",
aes(label = c(after_stat(prop), "(n)")),
position = position_fill(vjust = 0.5)
) +
theme_classic()
p4_2
p4_2 <- gdh_uls |>
mutate(
idade_cat = cut(idade, c(0, 18, 65, Inf))
) |>
count(uls_2024, idade_cat) |>
mutate(
prop_total = n/sum(n)
) |>
ggplot() +
geom_bar(
aes(x = uls_2024, y = prop_total, fill = idade_cat),
position = "fill"
) +
geom_text(
aes(x = prop_total, fill = idade_cat,
label = percent(prop_total, accuracy = 1.0)
),
stat = "count",# mostrar %
position = position_fill(vjust = 0.5)
) +
theme_classic()
p4_2
p4_1 <- gdh_uls |>
mutate(
idade_cat = cut(idade, c(0, 18, 65, Inf))
) |>
ggplot() +
geom_bar(
aes(x = uls_2024, fill = idade_cat),
position = "stack"
) +
geom_text(
aes(x = uls_2024, fill = idade_cat, label = after_stat(count)),
stat = "count",
position = position_stack(vjust = 0.5)
) +
theme_classic()
p4_1
p4_0 <- gdh_uls |>
mutate(
idade_cat = cut(idade, c(0, 18, 65, Inf))
) |>
ggplot() +
geom_bar(
aes(x = uls_2024, fill = idade_cat),
position = "fill"
) +
geom_text(
aes(x = uls_2024, fill = idade_cat,
label = c(after_stat(count), "(n)")
),
stat = "count",
position = position_fill(vjust = 0.5)
) +
theme_classic()
p4_0
p4_0 <- gdh_uls |>
mutate(
idade_cat = cut(idade, c(0, 18, 65, Inf))
) |>
ggplot() +
geom_bar(
aes(x = uls_2024, fill = idade_cat),
position = "fill"
) +
geom_text(
aes(x = uls_2024, fill = idade_cat,
label = after_stat(count)
),
stat = "count",
position = position_fill(vjust = 0.5)
) +
theme_classic()
p4_0
p4_0 <- gdh_uls |>
mutate(
idade_cat = cut(idade, c(0, 18, 65, Inf))
) |>
ggplot() +
geom_bar(
aes(x = uls_2024, fill = idade_cat),
position = "fill"
) +
geom_text(
aes(
x = uls_2024,
fill = idade_cat,
label = after_stat(count)
),
stat = "count",
position = position_fill(vjust = 0.5)
) +
coord_flip() +
theme_classic()
p4_0
p4_0 <- gdh_uls |>
mutate(
idade_cat = cut(idade, c(0, 18, 65, Inf))
) |>
ggplot() +
geom_bar(
aes(x = uls_2024, fill = idade_cat),
position = "fill"
) +
geom_text(
aes(
x = uls_2024,
fill = idade_cat,
label = after_stat(count)
),
stat = "count",
position = position_fill(vjust = 0.5)
) +
coord_flip() +
theme_classic() +
theme(
legend.title = element_blank(),
legend.position = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank()
)
p4_0
p4_0 <- gdh_uls |>
mutate(
idade_cat = cut(idade, c(0, 18, 65, Inf))
) |>
ggplot() +
geom_bar(
aes(x = uls_2024, fill = idade_cat),
position = "fill"
) +
geom_text(
aes(
x = uls_2024,
fill = idade_cat,
label = after_stat(count)
),
stat = "count",
position = position_fill(vjust = 0.5)
) +
coord_flip() +
theme_classic() +
theme(
legend.title = element_blank(),
legend.position = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank()
)
p4_0
p4_0 <- gdh_uls |>
mutate(
idade_cat = cut(idade, c(0, 18, 65, Inf))
) |>
ggplot() +
geom_bar(
aes(x = uls_2024, fill = idade_cat),
position = "fill"
) +
geom_text(
aes(
x = uls_2024,
fill = idade_cat,
label = after_stat(count)
),
stat = "count",
position = position_fill(vjust = 0.5)
) +
theme(
legend.title = element_blank(),
legend.position = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank()
) +
coord_flip() +
theme_classic() +
p4_0
p4_1 <- gdh_uls |>
mutate(
idade_cat = cut(idade, c(0, 18, 65, Inf))
) |>
ggplot() +
geom_bar(
aes(x = uls_2024, fill = idade_cat),
position = "stack"
) +
geom_text(
aes(x = uls_2024, fill = idade_cat, label = after_stat(count)),
stat = "count",
position = position_stack(vjust = 0.5)
) +
theme_classic()
p4_0 <- gdh_uls |>
mutate(
idade_cat = cut(idade, c(0, 18, 65, Inf))
) |>
ggplot() +
geom_bar(
aes(x = uls_2024, fill = idade_cat),
position = "fill"
) +
geom_text(
aes(
x = uls_2024,
fill = idade_cat,
label = after_stat(count)
),
stat = "count",
position = position_fill(vjust = 0.5)
) +
theme(
legend.title = element_blank(),
legend.position = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank()
) +
coord_flip() +
theme_classic() +
p4_0
p4_0 <- gdh_uls |>
mutate(
idade_cat = cut(idade, c(0, 18, 65, Inf))
) |>
ggplot() +
geom_bar(
aes(x = uls_2024, fill = idade_cat),
position = "fill"
) +
geom_text(
aes(
x = uls_2024,
fill = idade_cat,
label = after_stat(count)
),
stat = "count",
position = position_fill(vjust = 0.5)
) +
theme(
legend.title = element_blank(),
legend.position = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank()
) +
coord_flip() +
theme_classic() +
p4_0
p4_0 <- gdh_uls |>
mutate(
idade_cat = cut(idade, c(0, 18, 65, Inf))
) |>
ggplot() +
geom_bar(
aes(x = uls_2024, fill = idade_cat),
position = "fill"
) +
geom_text(
aes(
x = uls_2024,
fill = idade_cat,
label = after_stat(count)
),
stat = "count",
position = position_fill(vjust = 0.5)
) +
theme(
legend.title = element_blank(),
legend.position = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank()
) +
coord_flip() +
theme_classic()
p4_0
